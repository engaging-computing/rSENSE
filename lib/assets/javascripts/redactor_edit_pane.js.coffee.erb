
$(document).ready ->
    
    $('.redactor_content_edit_link').click ->
        $(@).parent().parent().find('.redactor_content').redactor()
        $(@).siblings('.redactor_content_save_link').show();
        $(@).hide();
    
    $('.redactor_content_save_link').click ->
        $(@).siblings('.redactor_content_edit_link').show()
        $(@).hide()
        $.ajax
            url: $(@).attr('href')
            type: "PUT"
            dataType: "json"
            data:
                user:
                    content: $(@).parent().parent().find('.redactor_content').getCode()
            success: =>
                $(@).parent().parent().find('.redactor_content').destroyEditor()
        false