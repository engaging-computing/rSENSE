<script type="text/javascript">
  window.fields = JSON.parse('<%= raw @project.fields.to_json%>');
  window.postURL = '<%= url_for :controller => :data_sets, :action => :edit, :eid => @project.id %>';
</script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<% if can_edit?(@data_set) %>

  <div class="full_width_edit" style="font-size:2em;"><%= data_set_edit_helper 'title', can_edit?(@data_set), false, "/data_sets/#{@data_set.id}" %></div>
  <div><strong>Project:</strong> <%= link_to @project.title, project_path(@project.id)%></div>

  <div class="row">
    <div class="span12 edit_table_control pull-right">
    <button class="btn btn-primary edit_table_cancel">Cancel</button>
      <button id="edit_table_add_1" class="btn btn-primary edit_table_add">Add Row</button>
      <button id="edit_table_save_1" class="btn btn-success edit_table_save">Save</button>
    </div>
  </div>

  <div class="row">
    <div id="slickgrid-container"></div>
  </div>

  <div id="row-slickgrid-1" class="row">*Timestamps must be in the form "yyyy/MM/dd hh:mm:ss" or a unix timestamp</div>

  <div id="row-slickgrid-2" class="row">
    <div class="span12 edit_table_control pull-right">
    <button class="btn btn-primary edit_table_cancel">Cancel</button>
      <button id="edit_table_add_2" class="btn btn-primary edit_table_add">Add Row</button>
      <button id="edit_table_save_2" class="btn btn-success edit_table_save">Save</button>
    </div>
  </div>

  <script type="text/javascript">
    $(document).data('project', <%= @project.id %>);
    $('#slickgrid-container').data('cols',<%= "#{@cols}".html_safe %>);
    $('#slickgrid-container').data('data',<%= "#{@data}".html_safe %>);
  </script>

<%else%>

  You are not authorized to view this page.
  
<%end%>
