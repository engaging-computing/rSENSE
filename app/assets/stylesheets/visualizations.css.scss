// Place all the styles related to the Visualisations controller here.
// They will automatically be included in application.css.
// You can use Sass (SCSS) here: http: //sass-lang.com/

.visualizations-controller {

  // colors
  $light-bkg: linear-gradient(#F6F6F6, #D7D7D7);
  $light-bkg-inv: linear-gradient(#D7D7D7, #F6F6F6);
  $dark-bkg: linear-gradient(#E4E4E4, #C4C4C4);
  $dark-bkg-inv: linear-gradient(#C4C4C4, #E4E4E4);
  $border-color: #ABABAB;
  $border: thin solid $border-color;

  // some stuff on the page (buttons mostly) shouldn't be selectable
  @mixin unselectable {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  // makes page body fill the screen instead of having a fixed width
  // additional screen real-estate needed for visualizations
  .mainContent {
    width: 100%;
  }

  // just used for the border around the vis window
  #viscontainer {
    background-color: #FFF; // firefox - control menu turns black otherwise
    border: thin solid #ABABAB;
  }

  // the bar at the top of the vis window
  // puts a border only on the bottom of the tab list, #viscontainer does top and sides
  // removes padding that shouldn't be there to begin with, adds a gradient
  #visTabList {
    background-image: $light-bkg;
    border-bottom: $border;
    padding: 0;
    margin: 0;
  }

  // an individual tab
  // borders are only on the right - tab list and vis window cover the other sides
  .vis_tab {
    @include unselectable;
    display: inline-block;
    list-style: none;
    border-right: $border;
    .ui-tabs-anchor {
      display: block; // so vertical padding works
      padding: 6px 10px; // so the entire box is clickable
      color: #222;
      outline: 0;
    }
  }

  // an active tab has a different looking gradient
  .ui-tabs-active {
    background-image: $dark-bkg-inv;
  }

  // button that enables fullscreen vis, not the fullscreen viz itself
  #fullscreen-viz {
    margin: 1px;
  }

  // table vis needs additional love to make it look right
  #table_canvas {
    table {
      border-color: $border-color;
    }
    // first and second rows in the header box
    // just disabling the borders here
    .ui-jqgrid-labels, .ui-search-toolbar {
      border: 0 !important; // because inline styles
    }
    // the entire header box
    .ui-jqgrid-hbox {
      background-image: $light-bkg;
      padding-right: 17px;
      border-bottom: $border;
      table > thead > tr > th {
        border-top: none !important; // because inline styles
        border-right: $border;
      }
    }
    // this has an annoying border and looks bad but needs to be there
    .jqgfirstrow {
      visibility: hidden;
    }
    #first_toolbar_bottom, #prev_toolbar_bottom, #next_toolbar_bottom, #last_toolbar_bottom {
      background-image: url(/assets/vis/ui-icons_222222_256x240.png);
      width: 19px; // height set as !important to 19px elsewhere
      margin: 0 3px;
      padding: 0;
    }
    #first_toolbar_bottom {
      background-position: -78px -158px;
    }
    #prev_toolbar_bottom {
      background-position: -47px -158px;
    }
    #next_toolbar_bottom {
      background-position: -30px -158px;
    }
    #last_toolbar_bottom {
      background-position: -63px -158px;
    }
  }

  .vis_canvas {
    border-right: $border; // this makes it look like the control div has a border
    overflow: hidden; // because something inside vis_canvas is overflowing on every non-map vis
  }

  #controlhider {
    #control_hide_button {
      // eventually put this next to #fullscreen-viz?
      @include unselectable;
      margin: 10px 5px 5px;
    }
    float: none;
    margin: 0;
    padding: 0;
    width: 24px;
    display: inline-block;
  }

  #controldiv {
    padding-right: 10px;
    // this styles bootstrap stuff and IS VERY BAD
    .form-control {
      margin-bottom: 5px;
    }
    table {
      td:first-child {
        padding-right: 5px;
      }
    }
    .ui-accordion {
      margin: 10px 0 0;
      .ui-accordion-header {
        @include unselectable;
        outline: none;
        margin: 0;
        padding: 3px 0 7px 5px;
        border: thin solid #ABABAB;
        border-radius: 3px;
        background-image: $light-bkg;
        // this is the little arrow button next to every accordion header
        .ui-accordion-header-icon {
          width: 11px;
          height: 11px;
          background-image: url(/assets/vis/ui-icons_222222_256x240.png);
          display: inline-block;
          vertical-align: middle;
        }
        // button for shrunken accordion dropdown
        // can't figure out what e, s, or 1 stand for
        // uses image @ (5, 2) on /assets/vis/ui-icons_222222_256x240.png
        .ui-icon-triangle-1-e {
          background-position: -34px -18px;
        }
        // button for expanded accordion dropdown
        // uses image @ (3, 2) on /assets/vis/ui-icons_222222_256x240.png
        .ui-icon-triangle-1-s {
          background-position: -67px -18px;
        }
        // the text on the dropdown header
        a {
          padding-left: 10px;
          color: #222;
          font-size: 12pt;
        }
      }
      // moves the scrollbar inside the panel - better usability than being
      // able to scroll the entire control panel to see a name better
      // it still looks ugly, but it's less ugly than it could have been
      #ui-accordion-groupControl-panel-0 {
        padding-bottom: 20px;
        overflow-x: auto;
      }
    }
    // any input button inside this class isn't lined up with the text to its right - this fixes that
    .inner_control_div {
      .checkbox, .radio {
        margin: 1px 0 !important; // because inline styles are literally the worst thing

        input {
          margin-top: 2px;
          display: inline-block;
        }
      }
    }
    // because sliders need styling now that jQuery UI CSS is gone
    .ui-slider {
      position: relative;
      margin: 10px 5px;
      height: 10px;
      background-image: $light-bkg-inv;
      border: thin solid #ABABAB;
      border-radius: 3px;
    }
    .ui-slider-range {
      position: absolute;
      height: 8px;
      background-image: $dark-bkg;
      border-radius: 3px;
    }
    .ui-slider-handle {
      display: inline-block;
      position: absolute;
      width: 16px;
      height: 16px;
      margin: -4px 0 0 -8px;
      border-radius: 8px;
      border: $border;
      background-image: $dark-bkg;
    }
  } // end .controldiv
}

// the dropdown menu for the table vis is located as a direct child of the body, so this has to go here
ul#sopt_menu {
  background-color: #FFF;
  margin: 0;
  padding: 0;

  // display mode is required for list items to be displayed with proper margins and padding
  li {
    display: block;
    margin: 0;
    padding: 5px;
    border-left: thin solid #ABABAB;
    border-bottom: thin solid #ABABAB;
    border-right: thin solid #ABABAB;
  }

  // when a box is chosen or hovered over
  li:hover, li.ui-state-highlight {
    background-image: linear-gradient(#49A7DB, #268AC1);
    a > table > tbody > tr > td { // this is gross
      color: #FFF;
    }
  }
}
